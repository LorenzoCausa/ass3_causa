<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Experimental Robotics Laboratory: assignment3: aruco::MarkerPoseTracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_orizzontale_BLACK.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Experimental Robotics Laboratory: assignment3
   </div>
   <div id="projectbrief">Lorenzo Causa, 4519089</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacearuco.html">aruco</a></li><li class="navelem"><a class="el" href="classaruco_1_1_marker_pose_tracker.html">MarkerPoseTracker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classaruco_1_1_marker_pose_tracker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">aruco::MarkerPoseTracker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="posetracker_8h_source.html">posetracker.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8eeb8ba3c29a89c7c9c20e33197b59a7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaruco_1_1_marker_pose_tracker.html#a8eeb8ba3c29a89c7c9c20e33197b59a7">estimatePose</a> (<a class="el" href="classaruco_1_1_marker.html">Marker</a> &amp;m, const <a class="el" href="classaruco_1_1_camera_parameters.html">CameraParameters</a> &amp;cam_params, float markerSize, float minErrorRatio=4)</td></tr>
<tr class="memdesc:a8eeb8ba3c29a89c7c9c20e33197b59a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">estimatePose  <a href="classaruco_1_1_marker_pose_tracker.html#a8eeb8ba3c29a89c7c9c20e33197b59a7">More...</a><br /></td></tr>
<tr class="separator:a8eeb8ba3c29a89c7c9c20e33197b59a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b84a982a094e9315e7fe59d1c4ebe81"><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaruco_1_1_marker_pose_tracker.html#a9b84a982a094e9315e7fe59d1c4ebe81">getRTMatrix</a> () const</td></tr>
<tr class="separator:a9b84a982a094e9315e7fe59d1c4ebe81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeb0721dd6c63c52087dfd49dffcf8a0"><td class="memItemLeft" align="right" valign="top">const cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaruco_1_1_marker_pose_tracker.html#adeb0721dd6c63c52087dfd49dffcf8a0">getRvec</a> () const</td></tr>
<tr class="separator:adeb0721dd6c63c52087dfd49dffcf8a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab66e164a12b39e78d1427f55a4e088c5"><td class="memItemLeft" align="right" valign="top">const cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaruco_1_1_marker_pose_tracker.html#ab66e164a12b39e78d1427f55a4e088c5">getTvec</a> () const</td></tr>
<tr class="separator:ab66e164a12b39e78d1427f55a4e088c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Tracks the position of a marker. Instead of trying to calculate the position from scratch every time, it uses past observations to estimate the pose. It should solve the problem with ambiguities that arises in some circumstances</p>
<p>To solve ambiguity we follow the following idea. We are using the IPPE method, which returns the two possible solutions s0,s1. Error solution has a reprojection error e(s_i) and it is assumed that e(s0)&lt;e(s1). If the reprojection errors are similar, then, it is difficult from only one image to know the correct location. So, if the error ratio er=e(s_1)/e(s_0) ~ 1, there is a possible ambiguity problem. Please notice that er is in range [1, inf)</p>
<p>To solve the problem, we should do a tracking process, so that when the ambiguity occur, you can select the solution nearest to the previous position.</p>
<p>So, the only problem now becomes the initialization. You have two options. First, you wait for a position in which ambiguity does not happen. When a robust position is seen, you start tracking. Second, you risk and start tracking and if later you discover the error, you correct.</p>
<p>This idea is implemented in the tracker.</p>
<p>Call estimatePose indicated as last parameter the error ratio you want for the initialization. If the parameter is set er = 1, then you start right away. Be warned then that you might suffer a big shift later if there was an erroneous starting location</p>
<p>If you do not want to risk, I recommend using more conservative approach, use a value of er = 4. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a8eeb8ba3c29a89c7c9c20e33197b59a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eeb8ba3c29a89c7c9c20e33197b59a7">&#9670;&nbsp;</a></span>estimatePose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool aruco::MarkerPoseTracker::estimatePose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classaruco_1_1_marker.html">Marker</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classaruco_1_1_camera_parameters.html">CameraParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>cam_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>markerSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>minErrorRatio</em> = <code>4</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>estimatePose </p>
<p>Estimate the pose of the marker. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>marker info </td></tr>
    <tr><td class="paramname">cam_params</td><td>camera parameters </td></tr>
    <tr><td class="paramname">markerSize</td><td></td></tr>
    <tr><td class="paramname">minErrorRatio</td><td>see explanation above. If you want to be conservative, use minErrorRatio = 4. tau_e in paper </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the pose is estimated and false otherwise. If not estimated, the parameters m.Rvec and m.Tvec and not set. </dd></dl>

</div>
</div>
<a id="a9b84a982a094e9315e7fe59d1c4ebe81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b84a982a094e9315e7fe59d1c4ebe81">&#9670;&nbsp;</a></span>getRTMatrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat aruco::MarkerPoseTracker::getRTMatrix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adeb0721dd6c63c52087dfd49dffcf8a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeb0721dd6c63c52087dfd49dffcf8a0">&#9670;&nbsp;</a></span>getRvec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const cv::Mat aruco::MarkerPoseTracker::getRvec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab66e164a12b39e78d1427f55a4e088c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab66e164a12b39e78d1427f55a4e088c5">&#9670;&nbsp;</a></span>getTvec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const cv::Mat aruco::MarkerPoseTracker::getTvec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>aruco_ros/aruco/include/aruco/<a class="el" href="posetracker_8h_source.html">posetracker.h</a></li>
<li>aruco_ros/aruco/src/aruco/<a class="el" href="posetracker_8cpp.html">posetracker.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
